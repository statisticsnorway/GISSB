# dplyr::rename(fodested = Fødselsmåned) %>%
# dplyr::filter(!fodested %in% c("Ikke inst.reg", "Ukjent helseregion", "Alle fødeinstitusjoner", "Oslo univ.sh.")) %>%
dplyr::mutate(fodte_2 = gsub(" ", "", as.character(fodte))) # %>%
# dplyr::group_by(fodested) %>%
# dplyr::slice(which.min(fodte))
unique(data$fodested)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
isochrones <- ds %>%
sfarrow::read_sf_dataset()
library(tidyverse)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
isochrones <- ds %>%
sfarrow::read_sf_dataset()
alle_2 <- isochrones %>%
dplyr::filter(minutes == 10) %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
View(isochrones)
Sys.setlocale("LC_ALL","no_NB.utf8"
Sys.setlocale("LC_ALL","no_NB.utf8")
isochrones$
alle_2 <- isochrones %>%
dplyr::filter(minutes == 10,
`F<c3>.deinstitusjon` == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
isochrones$
alle_2 <- isochrones %>%
dplyr::filter(minutes == 10,
`Fødeinstitusjon` == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
Sys.setlocale("LC_ALL","no_NB.utf8")
library(tidyverse)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
isochrones <- ds %>%
sfarrow::read_sf_dataset()
isochrones$`F<c3>.deinstitusjon`
Sys.setlocale("LC_ALL","no_NB.utf8")
library(tidyverse)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
isochrones <- ds %>%
sfarrow::read_sf_dataset()
View(isochrones)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 10,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 1,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 2,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 3,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 4,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 10,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 15,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 30,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 40,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 60,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 70,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 80,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 90,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
sf::st_write(isochrones, "C:/Users/rdn/Documents/Kart/isochrones_90.shp", delete_dsn = TRUE)
View(alle_2)
View(isochrones)
isochrones
fodeavdelinger <- klassR::GetKlass(608, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødeavdeling") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 25833)
aargang <- 2021
fodeavdelinger <- klassR::GetKlass(608, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødeavdeling") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 25833)
fodestuer <- klassR::GetKlass(609, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødestue") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 25833)
fodesteder_koord <- rbind(fodeavdelinger, fodestuer)
fodesteder_koord
fodeavdelinger <- klassR::GetKlass(608, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødeavdeling") # %>%
fodestuer <- klassR::GetKlass(609, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødestue") # %>%
fodesteder_koord <- rbind(fodeavdelinger, fodestuer)
View(fodesteder_koord)
fodesteder_koord <- rbind(fodeavdelinger, fodestuer) %>%
dplyr::select(Fødeinstitusjon, lon, lat)
View(fodesteder_koord)
isochrones_2 <- isochrones %>%
dplyr::left_join(fodesteder_koord, by = "Fødeinstitusjon")
View(isochrones_2)
isochrones <- isochrones %>%
dplyr::left_join(fodesteder_koord, by = "Fødeinstitusjon")
sf::st_write(isochrones, "C:/Users/rdn/Documents/Kart/isochrones_90.shp", delete_dsn = TRUE)
test <- sf::read_sf(""C:/Users/rdn/Documents/Kart/isochrones_90.shp"")
test <- sf::read_sf("C:/Users/rdn/Documents/Kart/isochrones_90.shp")
View(test)
((100000/1000) / 100 * 60.0) * 1
((100000/1000)/100*60.0)*1
((100000/1000)/100*60.0)*1.5
((100000/1000)/100*60.0)*1
((100000/1000)/100*60.0)*1.5
((100000/1000)/100*60.0)*1.15
aargang <- 2021
Sys.setlocale("LC_ALL","no_NB.utf8")
library(tidyverse)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_90.parquet")
isochrones <- ds %>%
sfarrow::read_sf_dataset()
fodeavdelinger <- klassR::GetKlass(608, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødeavdeling") # %>%
fodestuer <- klassR::GetKlass(609, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(region = code1,
orgnummer_RHF = code2,
RHF = name2,
HF = name3,
orgnummer_HF = code3,
Fødeinstitusjon = name4,
ID = code4,
adresse = name5,
postnummer = code5,
lon = code6,
lat = name6) %>%
dplyr::mutate(lon = gsub(",", ".", lon),
lat = gsub(",", ".", lat),
Type = "Fødestue") # %>%
fodesteder_koord <- rbind(fodeavdelinger, fodestuer) %>%
dplyr::select(Fødeinstitusjon, lon, lat)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 90,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 1,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 2,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 3,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 30,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 60,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
alle_2 <- isochrones %>%
dplyr::filter(minutes == 90,
Fødeinstitusjon == "Haukeland universitetssjukehus") %>%
sf::st_transform(crs = 4326)
alle_2 %>%
data.frame()
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(data = alle_2)
# rm(list = c("beregne_avstand_cpp"))
devtools::document()
devtools::check()
usethis::use_package("here", type = "imports")
devtools::check()
# usethis::use_package("cppRouting", type = "imports")
# usethis::use_package("nabor", type = "imports")
# usethis::use_package("reshape2", type = "imports")
# usethis::use_package("purrr", type = "imports")
# usethis::use_package("tibble", type = "imports")
# usethis::use_package("leaflet", type = "imports")
# usethis::use_package("RCurl", type = "imports")
# usethis::use_package("stringr", type = "imports")
# usethis::use_package("rlang", type = "imports")
# usethis::use_package("here", type = "imports")
usethis::use_package("tidyselect", type = "imports")
devtools::check()
# rm(list = c("beregne_avstand_cpp"))
devtools::document()
devtools::check()
# usethis::use_package("igraph", type = "imports")
# usethis::use_package("tidygraph", type = "imports")
# usethis::use_package("cppRouting", type = "imports")
# usethis::use_package("nabor", type = "imports")
# usethis::use_package("reshape2", type = "imports")
# usethis::use_package("purrr", type = "imports")
# usethis::use_package("tibble", type = "imports")
# usethis::use_package("leaflet", type = "imports")
# usethis::use_package("RCurl", type = "imports")
# usethis::use_package("stringr", type = "imports")
usethis::use_package("rlang", type = "imports")
# rm(list = c("beregne_avstand_cpp"))
devtools::document()
devtools::check()
devtools::check()
# rm(list = c("beregne_avstand_cpp"))
devtools::document()
devtools::check()
sessionInfo()
# Lager vignette
# usethis::use_vignette("GISSB_vignette")
usethis::use_pkgdown() # OBS: docs legges i .gitignore (må fjernes) - kjøres kun en gang?
pkgdown::build_site()
# Installerer pakken lokalt #
devtools::install()
pkgdown::build_site()
graph <- readRDS(file = "C:/Users/rdn/Documents/Kart/Vegnett/graph.rds")
devtools::check()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
test <- arrow::read_parquet("C:/Users/rdn/Documents/Kart/isochrones_vegnett_vegnett_isochrones_90.parquet")
unique(test$Fødeinstitusjon)
unique(test$minutes)
test_1 <- test %>%
dplyr::filter(minutes == 1)
library(tidyverse)
test_1 <- test %>%
dplyr::filter(minutes == 1)
ggplot() +
geom_sf(data = test_1)
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_vegnett_vegnett_isochrones_90.parquet")
test <- ds %>%
sfarrow::read_sf_dataset()
colnames(test)
test_1 <- test %>%
dplyr::filter(minutes == 1)
colnames(test_1)
ggplot() +
geom_sf(data = test_1)
View(test_1)
Sys.setlocale("LC_ALL","no_NB.utf8")
ds <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/isochrones_vegnett_vegnett_isochrones_90.parquet")
test <- ds %>%
sfarrow::read_sf_dataset()
colnames(test)
unique(test$minutes)
unique(test$Fødeinstitusjon)
#
test_1 <- test %>%
dplyr::filter(minutes == "Kristiansund sjukehus")
# dplyr::filter(minutes == 1)
colnames(test_1)
ggplot() +
geom_sf(data = test_1)
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus")
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 1)
ggplot() +
geom_sf(data = test_1)
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 90)
ggplot() +
geom_sf(data = test_1)
sf::write_sf(test, "C:/Users/rdn/Documents/Kart/isochrones_vegnett_90.shp")
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 1)
ggplot() +
geom_sf(data = test_1)
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 1) %>%
sf::st_transform(crs = 4326)
ggplot() +
geom_sf(data = test_1)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 2) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
#
test_1 <- test %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
minutes == 3) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
unique(test$Fødeinstitusjon)
# rm(list = c("beregne_avstand_cpp"))
devtools::document()
devtools::check()
# Lag pakke (?)
devtools::build()
pkgdown::build_site()
